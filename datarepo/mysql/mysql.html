<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sql | 有空看看</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/dose1/assets/css/0.styles.c9546c7c.css" as="style"><link rel="preload" href="/dose1/assets/js/app.370f2ecb.js" as="script"><link rel="preload" href="/dose1/assets/js/2.579f079f.js" as="script"><link rel="preload" href="/dose1/assets/js/12.7a3b1235.js" as="script"><link rel="prefetch" href="/dose1/assets/js/10.15b385d2.js"><link rel="prefetch" href="/dose1/assets/js/11.7719a193.js"><link rel="prefetch" href="/dose1/assets/js/13.bf569039.js"><link rel="prefetch" href="/dose1/assets/js/14.f04af72a.js"><link rel="prefetch" href="/dose1/assets/js/15.cae4f64f.js"><link rel="prefetch" href="/dose1/assets/js/16.28681f08.js"><link rel="prefetch" href="/dose1/assets/js/17.54584c3d.js"><link rel="prefetch" href="/dose1/assets/js/18.4b466fb7.js"><link rel="prefetch" href="/dose1/assets/js/19.882f21ee.js"><link rel="prefetch" href="/dose1/assets/js/20.6d8d7aa6.js"><link rel="prefetch" href="/dose1/assets/js/21.ed3f43c1.js"><link rel="prefetch" href="/dose1/assets/js/22.b9fd778f.js"><link rel="prefetch" href="/dose1/assets/js/23.2563d097.js"><link rel="prefetch" href="/dose1/assets/js/24.33dab2d6.js"><link rel="prefetch" href="/dose1/assets/js/25.35b2c93b.js"><link rel="prefetch" href="/dose1/assets/js/26.fa63a29b.js"><link rel="prefetch" href="/dose1/assets/js/27.a5ca9c28.js"><link rel="prefetch" href="/dose1/assets/js/28.c8d6aeb7.js"><link rel="prefetch" href="/dose1/assets/js/29.bc350787.js"><link rel="prefetch" href="/dose1/assets/js/3.dddbab9e.js"><link rel="prefetch" href="/dose1/assets/js/4.dacb7f3f.js"><link rel="prefetch" href="/dose1/assets/js/5.516cbc1e.js"><link rel="prefetch" href="/dose1/assets/js/6.c1a5c5b5.js"><link rel="prefetch" href="/dose1/assets/js/7.eb3c1009.js"><link rel="prefetch" href="/dose1/assets/js/8.7ced4e1e.js"><link rel="prefetch" href="/dose1/assets/js/9.fb95937f.js">
    <link rel="stylesheet" href="/dose1/assets/css/0.styles.c9546c7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dose1/" class="home-link router-link-active"><img src="/dose1/assets/img/logo.jpg" alt="有空看看" class="logo"> <span class="site-name can-hide">有空看看</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dose1/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/datarepo/mysql/mysql.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/two.html" class="nav-link">
  备用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/mybefore/mybase/前端基础.html" class="nav-link">
  三件套
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myjQuery/jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myajax/ajax.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myVue/Vue2/Vue1.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myVue/Vue3/Vue3.html" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/springpre/pre.html" class="nav-link">
  spring前言
</a></li><li class="dropdown-item"><!----> <a href="/dose1/springmvc/springmvc.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-item"><!----> <a href="/dose1/SpringBoot2/SpringBootFirst.html" class="nav-link">
  springBoot2
</a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/one.html" class="nav-link">
  备用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/other/newJava.html" class="nav-link">
  java8新特性
</a></li><li class="dropdown-item"><!----> <a href="/dose1/other/HashMap.html" class="nav-link">
  hashmap
</a></li><li class="dropdown-item"><!----> <a href="https://jojo-995.gitee.io/2021/03/06/markdown-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/two.html" class="nav-link">
  备用
</a></li></ul></div></div> <a href="https://github.com/jack110959/dose1" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dose1/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/datarepo/mysql/mysql.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/two.html" class="nav-link">
  备用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/mybefore/mybase/前端基础.html" class="nav-link">
  三件套
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myjQuery/jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myajax/ajax.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myVue/Vue2/Vue1.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/dose1/mybefore/myVue/Vue3/Vue3.html" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/springpre/pre.html" class="nav-link">
  spring前言
</a></li><li class="dropdown-item"><!----> <a href="/dose1/springmvc/springmvc.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-item"><!----> <a href="/dose1/SpringBoot2/SpringBootFirst.html" class="nav-link">
  springBoot2
</a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/one.html" class="nav-link">
  备用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dose1/other/newJava.html" class="nav-link">
  java8新特性
</a></li><li class="dropdown-item"><!----> <a href="/dose1/other/HashMap.html" class="nav-link">
  hashmap
</a></li><li class="dropdown-item"><!----> <a href="https://jojo-995.gitee.io/2021/03/06/markdown-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/dose1/foo/two.html" class="nav-link">
  备用
</a></li></ul></div></div> <a href="https://github.com/jack110959/dose1" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dose1/datarepo/mysql/mysql.html" aria-current="page" class="active sidebar-link">Sql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#一-分类" class="sidebar-link">一，分类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_1-dml" class="sidebar-link">1，DML</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_2-ddl" class="sidebar-link">2，DDL</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_3-dcl" class="sidebar-link">3，DCL</a></li></ul></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#二-dml基本使用" class="sidebar-link">二，DML基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_1-单表select" class="sidebar-link">1，单表select</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_2-多表select" class="sidebar-link">2，多表select</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_3-插入insert" class="sidebar-link">3，插入insert</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_4-删除delete" class="sidebar-link">4，删除delete</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_5-修改update" class="sidebar-link">5，修改update</a></li></ul></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#三-函数" class="sidebar-link">三，函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_1-单行函数" class="sidebar-link">1，单行函数</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_2-组函数" class="sidebar-link">2，组函数</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_3-总流程" class="sidebar-link">3，总流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#四-子查询" class="sidebar-link">四，子查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_1-单行子查询" class="sidebar-link">1，单行子查询</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_2-多行子查询" class="sidebar-link">2，多行子查询</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_3-exists" class="sidebar-link">3，exists</a></li></ul></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#五-数据库操作" class="sidebar-link">五，数据库操作</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#六-表操作" class="sidebar-link">六，表操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_1-表操作" class="sidebar-link">1，表操作</a></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#_2-列的增删改查" class="sidebar-link">2，列的增删改查</a></li></ul></li><li class="sidebar-sub-header"><a href="/dose1/datarepo/mysql/mysql.html#七-约束" class="sidebar-link">七，约束</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql"><a href="#sql" class="header-anchor">#</a> Sql</h1> <p>以mysql的sql为例</p> <p>需要注意</p> <ul><li>mysql的sql不区分大小写</li> <li>mysql的索引从1开始（java从0开始）</li></ul> <h2 id="一-分类"><a href="#一-分类" class="header-anchor">#</a> 一，分类</h2> <h3 id="_1-dml"><a href="#_1-dml" class="header-anchor">#</a> 1，DML</h3> <p>数据操作语言，一般用与增删改查。</p> <p>关键字：insert，update，delete，select.</p> <h3 id="_2-ddl"><a href="#_2-ddl" class="header-anchor">#</a> 2，DDL</h3> <p>数据定义语言，定义数据库的各种对象</p> <p>关键字：create，alter，drop，rename，truncate.</p> <p>注意：该类操作执行后都会自动提交，并且不受set autocommit=false影响，所有无法进行回滚</p> <h3 id="_3-dcl"><a href="#_3-dcl" class="header-anchor">#</a> 3，DCL</h3> <p>数据控制语言，用于控制不同数据段直接的许可和访问级别的语句。这些语句定义了数据库，表，字段，用户的访问权限和安全级别。</p> <p>关键字：commit，rollback，grant，revoke，savepoint</p> <h2 id="二-dml基本使用"><a href="#二-dml基本使用" class="header-anchor">#</a> 二，DML基本使用</h2> <h3 id="_1-单表select"><a href="#_1-单表select" class="header-anchor">#</a> 1，单表select</h3> <h4 id="_1-基本使用"><a href="#_1-基本使用" class="header-anchor">#</a> （1）基本使用</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查所有可以用*</span>
<span class="token keyword">select</span> 列名<span class="token punctuation">,</span>列名 <span class="token keyword">from</span> 表名
</code></pre></div><h4 id="_2-列名起别名"><a href="#_2-列名起别名" class="header-anchor">#</a> （2）列名起别名</h4> <p>关键字：as</p> <p>可以用空格隔开后面加别名，也可以用”as“连接。</p> <p>如果比较复杂的别名也可以用一对双引号包裹起来，比如  &quot;user user&quot;。</p> <p><strong>需要注意列的别名只能在order by中使用。</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> id user_id<span class="token punctuation">,</span>age <span class="token keyword">as</span> user_age <span class="token keyword">from</span> t_user
</code></pre></div><h4 id="_3-去掉重复值"><a href="#_3-去掉重复值" class="header-anchor">#</a> （3）去掉重复值</h4> <p>关键字：distinct</p> <p>这里去掉的是各个列名都完全一样的重复值。一般放置最前，放后面可能会出现一些问题。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> age <span class="token keyword">as</span> user_age<span class="token punctuation">,</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span> user_user <span class="token keyword">from</span> t_user
</code></pre></div><h4 id="_4-空值问题"><a href="#_4-空值问题" class="header-anchor">#</a> （4）空值问题</h4> <p>如果查询列有一个需要用到其他列做运算时，如果该列为null，那么运算后的值也为null。</p> <ul><li>查询时可以用IFNULL(列名,为<strong>null</strong>时要赋的默认值)函数来解决。</li> <li>也可以在一开始设计表时就让他默认值为0，缺点就是不能赋值其他的值来做运算。</li></ul> <p>比如下列中，age为nul时就会使用0来做运算。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> age<span class="token punctuation">,</span>IFNULL<span class="token punctuation">(</span>age<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token keyword">from</span> t_user
</code></pre></div><h4 id="_5-查看表结构"><a href="#_5-查看表结构" class="header-anchor">#</a> （5）查看表结构</h4> <p>跟设计表界面差不多，可以看各个属性的设置</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESC</span> t_user
</code></pre></div><h4 id="_6-条件查询where"><a href="#_6-条件查询where" class="header-anchor">#</a> （6）条件查询where</h4> <p><strong>A:between 下边界 and 上边界</strong></p> <p>注意是闭区间，包含了上下边界。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token comment">-- where age &gt;=10 and age &lt;=20</span>
<span class="token keyword">where</span> age <span class="token operator">between</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">20</span>
<span class="token comment">-- 不包含在里面</span>
<span class="token keyword">where</span> age <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">20</span>
</code></pre></div><p><strong>B:in()</strong></p> <p>查询in里面含有的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token comment">-- where age =10 or age =20</span>
<span class="token keyword">where</span> age <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>C：like</strong></p> <p>模糊查询，查询含有某个字符的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">%</span>：表示<span class="token number">0</span>个或多个不确定字符
_：表示一个不确定字符
\_：表示字符_
<span class="token comment">-- 下面表示查找user中第二个字符为i，i后面的字符为_，并且后面可以有0个或多个不确定字符</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">like</span> <span class="token string">'_i\_%'</span>
</code></pre></div><p><strong>D:null</strong></p> <p>可以查询属性为<strong>null</strong>的数据或不为<strong>null</strong>的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token comment">-- where user is null</span>
<span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
</code></pre></div><h4 id="_7-排序和分页"><a href="#_7-排序和分页" class="header-anchor">#</a> （7）排序和分页</h4> <p><strong>A:排序</strong></p> <p>关键字：order by  列名 desc/asc</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- dese:descend,降序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span> <span class="token string">'jack'</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">desc</span>
<span class="token comment">-- asc: ascend, 升序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">asc</span>
<span class="token comment">--默认为升序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token keyword">order</span> <span class="token keyword">by</span> age 
<span class="token comment">-- 多级排序按第一个开始排，有相等再按下面的排</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">asc</span><span class="token punctuation">,</span>id <span class="token keyword">desc</span>
</code></pre></div><p><strong>B:分页</strong></p> <p>关键字：limit</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 公式：pageNum页数，pageSize每页大小</span>
<span class="token comment">-- select * from t_user limit (pageNum-1)*pageSize,pageSize</span>

<span class="token comment">-- 每页显示3条数据，查询第二页的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span>
<span class="token comment">-- 每页显示3条数据，查询第三页的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user <span class="token keyword">limit</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span>
<span class="token comment">-- 查询年龄最大的3个人，降序后，取前3个</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user 
<span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span>
</code></pre></div><h3 id="_2-多表select"><a href="#_2-多表select" class="header-anchor">#</a> 2，多表select</h3> <p>简单理解结构</p> <p>一般情况多表查询都会有两种情况，一种是匹配上了的，一种是没有匹配上的。</p> <p>内连接：显示（1）和（2）</p> <p>左外连接：显示（1）和（2）和（3）</p> <p>右外连接：显示（1）和（2）和（4）</p> <table><thead><tr><th style="text-align:left;">表一</th> <th style="text-align:left;">表二</th></tr></thead> <tbody><tr><td style="text-align:left;">（1）表一匹配上的数据</td> <td style="text-align:left;">（2）表二匹配上的数据</td></tr> <tr><td style="text-align:left;">（3）表一没有匹配上的数据</td> <td style="text-align:left;">（4）表二没有匹配上的数据</td></tr></tbody></table> <h4 id="_1-简单示例"><a href="#_1-简单示例" class="header-anchor">#</a> （1）简单示例</h4> <p>需要注意的是：想实现n个表的多表查询至少需要n-1个连接条件。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 一般情况下</span>
<span class="token keyword">select</span> age<span class="token punctuation">,</span>number
<span class="token keyword">from</span> t_user<span class="token punctuation">,</span>tb_orders
<span class="token keyword">where</span> t_user<span class="token punctuation">.</span>id<span class="token operator">=</span> tb_orders<span class="token punctuation">.</span>user_id
<span class="token comment">-- 优化之后 </span>
<span class="token comment">-- 如果没有指明哪个表的属性，就会去两个表中查找，可以给每个属性指定表名，从而提高查找效率</span>
<span class="token keyword">select</span> u<span class="token punctuation">.</span>age<span class="token punctuation">,</span>o<span class="token punctuation">.</span>number
<span class="token keyword">from</span> t_user u<span class="token punctuation">,</span>tb_orders o
<span class="token keyword">where</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span> o<span class="token punctuation">.</span>user_id
</code></pre></div><h4 id="_2-分类"><a href="#_2-分类" class="header-anchor">#</a> （2）分类</h4> <p>多表查询可以分为3种</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">1</span>，等值连接 vs 不等值连接
<span class="token number">2</span>，自连接   vs 非自连接
<span class="token number">3</span>，内连接   vs 外连接
</code></pre></div><h5 id="a-等值连接"><a href="#a-等值连接" class="header-anchor">#</a> A，等值连接</h5> <p>大部分情况使用的都是等值连接。</p> <p>即条件为等号连接</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> u<span class="token punctuation">.</span>age<span class="token punctuation">,</span>o<span class="token punctuation">.</span>number
<span class="token keyword">from</span> t_user u<span class="token punctuation">,</span>tb_orders o
<span class="token keyword">where</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span> o<span class="token punctuation">.</span>user_id
</code></pre></div><h5 id="b-不等值连接"><a href="#b-不等值连接" class="header-anchor">#</a> B，不等值连接</h5> <p>条件为其他关键字连接</p> <p>比如学生表中有成绩属性为数值，成绩等级表有等级，以及等级的分数范围。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span>u<span class="token punctuation">.</span>age<span class="token punctuation">,</span>r<span class="token punctuation">.</span>grade 
<span class="token keyword">from</span> t_user u<span class="token punctuation">,</span>result r
<span class="token keyword">where</span> u<span class="token punctuation">.</span>grade 
<span class="token operator">between</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">begin</span><span class="token punctuation">`</span> <span class="token operator">and</span> r<span class="token punctuation">.</span><span class="token keyword">last</span>
</code></pre></div><h5 id="c-自连接"><a href="#c-自连接" class="header-anchor">#</a> <strong>C，自连接</strong></h5> <p>自己跟自己进行多表查询。</p> <p>比如，员工表中会有对应的上级的属性，上级也是员工的一个。</p> <p>所以如果想查询员工属性加上上级的属性信息可以采用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>id e_id<span class="token punctuation">,</span>e<span class="token punctuation">.</span>name e_name<span class="token punctuation">,</span>m<span class="token punctuation">.</span>id m_id<span class="token punctuation">,</span>m<span class="token punctuation">.</span>name m_name
<span class="token comment">-- 对同一个表起不同的别名用做区分</span>
<span class="token keyword">from</span> employee e<span class="token punctuation">,</span>employee m
<span class="token keyword">where</span> e<span class="token punctuation">.</span>managerID<span class="token operator">=</span>m<span class="token punctuation">.</span>id
</code></pre></div><h5 id="d-内连接"><a href="#d-内连接" class="header-anchor">#</a> D，内连接</h5> <p>关键字：join  on</p> <p>一般情况多表查询都会有两种情况，一种是匹配上了的，一种是没有匹配上的。</p> <p>默认情况下只显示那些匹配上了的数据，这种也就是内连接。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- inner可加可不加</span>
<span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">inner</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
<span class="token comment">-- 多张表继续加即可</span>
<span class="token comment">-- join 表名</span>
<span class="token comment">-- on 条件</span>
</code></pre></div><h5 id="e-外连接"><a href="#e-外连接" class="header-anchor">#</a> E，外连接</h5> <p>外连接，顾名思义，也就是连接外面那些没有匹配上的。</p> <p>但又因为有两个表，所以也分为了左外连接和右外连接来选择显示哪张表输出没有匹配上的数据。</p> <p><strong>左外连接</strong>：left outer join+on</p> <p>下面会显示t_user表的所有数据，以及对应上的tb_orders表的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- outer可加可不加</span>
<span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
</code></pre></div><p><strong>右外连接</strong>：right outer join+on</p> <p>下面会显示tb_orders表的所有数据，以及对应上的t_user表的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- outer可加可不加</span>
<span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
</code></pre></div><p><strong>满外连接</strong></p> <p>很遗憾的是<strong>mysql</strong>中不支持<strong>full join</strong>这个关键字</p> <p>如果在其他数据库可以这样使用</p> <p>这样就可以将两种表中没有对应上的都各自查询出来。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">full</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
</code></pre></div><p>不过也可以使用<strong>union all</strong>或<strong>union</strong>来通过各种搭配得到我们所想要的部分数据</p> <p>一般推荐使用<strong>union all</strong>，因为union会有去掉重复数据的操作，这多余的去重操作也会耗费时间。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">left</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> u<span class="token punctuation">.</span>id userId<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>number 
<span class="token keyword">from</span> t_user u <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> tb_orders o
<span class="token keyword">on</span> u<span class="token punctuation">.</span>id<span class="token operator">=</span>o<span class="token punctuation">.</span>user_id
</code></pre></div><h3 id="_3-插入insert"><a href="#_3-插入insert" class="header-anchor">#</a> 3，插入insert</h3> <p>insert into 表名 （列名，列名）values(数值型，'字符型'，'date型')</p> <h4 id="_1-普通插入"><a href="#_1-普通插入" class="header-anchor">#</a> （1）普通插入</h4> <p>根据指定列名对应插入，顺序可不同。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-基于其他表插入"><a href="#_2-基于其他表插入" class="header-anchor">#</a> （2）基于其他表插入</h4> <p>插入的列名和列数要跟查询的列名的数值类型要一致</p> <p>类型的大小尽量保持一样大小，没有超出时不会报错。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span>grade <span class="token keyword">from</span> t_user
</code></pre></div><h3 id="_4-删除delete"><a href="#_4-删除delete" class="header-anchor">#</a> 4，删除delete</h3> <p>delete from......where......</p> <p>没有where就是删除所有</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">18</span>
</code></pre></div><h3 id="_5-修改update"><a href="#_5-修改update" class="header-anchor">#</a> 5，修改update</h3> <p>update 表名 set 列名=新值 where ......</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> tb_orders <span class="token keyword">set</span> duetime<span class="token operator">=</span><span class="token string">'2018-09-03'</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">10</span>
</code></pre></div><h2 id="三-函数"><a href="#三-函数" class="header-anchor">#</a> 三，函数</h2> <h3 id="_1-单行函数"><a href="#_1-单行函数" class="header-anchor">#</a> 1，单行函数</h3> <h4 id="_1-字符串类型"><a href="#_1-字符串类型" class="header-anchor">#</a> （1）字符串类型</h4> <p>自带隐式转换，如果属性为int类型会自动转为字符串。</p> <p>基本能够取得任意位置的字符串，或替换他</p> <p>下面只列举几种常用的方法</p> <h5 id="a-concat"><a href="#a-concat" class="header-anchor">#</a> <strong>A，concat</strong></h5> <p>可以将多列字符串类型的值组合成一个</p> <p>下列将user和action组合成新列detail，也可以加上自己定义的字符串，比如'去’。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">,</span><span class="token string">'去'</span><span class="token punctuation">,</span><span class="token keyword">action</span><span class="token punctuation">)</span> detail
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="b-concat-ws"><a href="#b-concat-ws" class="header-anchor">#</a> B，concat_ws</h5> <p>这个函数可以把多列结合起来并以某个字符连接起来</p> <p>下列用'-'连接起来</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span><span class="token keyword">action</span><span class="token punctuation">)</span> detail
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="c-左-右对齐"><a href="#c-左-右对齐" class="header-anchor">#</a> C，左/右对齐</h5> <p>针对列中可能会出现字符数量不一致的情况，比如地址什么的，能够统一规范。</p> <p>lpad：右对齐</p> <p>rpad：左对齐</p> <p>第一个参数为列名，第二个参数为补齐多少位，第三个参数补齐使用的字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rpad<span class="token punctuation">(</span><span class="token keyword">action</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="d-insert"><a href="#d-insert" class="header-anchor">#</a> D，insert</h5> <p>查询某个列名时，可以用这个函数来替换某些位置的字符</p> <p>insert(列名,开始位置,替换几个,'用来替换的字符')</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'替换'</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="e-strcmp"><a href="#e-strcmp" class="header-anchor">#</a> E，strcmp</h5> <p>比较字符串，返回1，0，-1中的一个。</p> <p>strcmp（列名，列名）</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">,</span><span class="token keyword">action</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h4 id="_2-数值类型"><a href="#_2-数值类型" class="header-anchor">#</a> （2）数值类型</h4> <table><thead><tr><th style="text-align:center;">函数</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">ABS(x)</td> <td style="text-align:center;">返回x的绝对值</td></tr> <tr><td style="text-align:center;">CEIL(x)</td> <td style="text-align:center;">返回大于x的最小整数值</td></tr> <tr><td style="text-align:center;">FLOOF(x)</td> <td style="text-align:center;">返回小于x的最大整数值</td></tr> <tr><td style="text-align:center;">MOD(x,y)</td> <td style="text-align:center;">返回x/y的模</td></tr> <tr><td style="text-align:center;">RAND()</td> <td style="text-align:center;">返回0—1的随机值</td></tr> <tr><td style="text-align:center;">ROUND(x,y)</td> <td style="text-align:center;">返回参数x的四舍五入的有y位的小数的值</td></tr> <tr><td style="text-align:center;">TRUNCATE(x,y)</td> <td style="text-align:center;">返回数字x截断为y位小数的结果</td></tr> <tr><td style="text-align:center;">SQRT(x)</td> <td style="text-align:center;">返回x的平方根</td></tr> <tr><td style="text-align:center;">POW(x,y)</td> <td style="text-align:center;">返回x的y次方</td></tr></tbody></table> <p>示例</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> FLOOR<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
<span class="token keyword">where</span> age<span class="token operator">=</span>FLOOR<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-日期类型"><a href="#_3-日期类型" class="header-anchor">#</a> （3）日期类型</h4> <h5 id="a-获取当前日期"><a href="#a-获取当前日期" class="header-anchor">#</a> A，获取当前日期</h5> <p>年-月-日</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><h5 id="b-获取当前时间"><a href="#b-获取当前时间" class="header-anchor">#</a> B，获取当前时间</h5> <p>时：分：秒</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> curtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">CURRENT_TIME</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><h5 id="c-获取当前日期时间"><a href="#c-获取当前日期时间" class="header-anchor">#</a> C，获取当前日期时间</h5> <p>年-月-日 时：分：秒</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><h5 id="d-获取独立的时间"><a href="#d-获取独立的时间" class="header-anchor">#</a> D，获取独立的时间</h5> <p>独立的年月日时分秒</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">month</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><h5 id="e-获取星期"><a href="#e-获取星期" class="header-anchor">#</a> E，获取星期</h5> <ul><li>week(curdate())：返回一年中的第几周</li> <li>dayofweek(curdate())：返回周几，周日是1，周六是7</li> <li>weekday(curdate())：返回周几，周一是0，周日是6</li> <li>dayname(curdate())：返回星期几</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> week<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dayofweek<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>weekday<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dayname<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><h5 id="f-获取相隔多少的日期"><a href="#f-获取相隔多少的日期" class="header-anchor">#</a> F，获取相隔多少的日期</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 获取当前时间的下一年</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">year</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
<span class="token comment">-- 获取当前时间的上一月</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">month</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
<span class="token comment">-- 也可以搭配使用，用'_'分开，要有单引号</span>
<span class="token comment">-- 获取当前时间的上一年的下个月</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token string">'-1_1'</span> year_month<span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><p>适用场景，订单信息表插人时可以自己计算到期时间</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_orders <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'21312'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">month</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="g-获取距离当前时间的时间差"><a href="#g-获取距离当前时间的时间差" class="header-anchor">#</a> G，获取距离当前时间的时间差</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> myempty
</code></pre></div><p>适用场景，查询到期时间在现在或之后的15天内的所有数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- paytime大返回正。小返回负</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_orders
<span class="token keyword">where</span> datediff<span class="token punctuation">(</span>paytime<span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">between</span> <span class="token number">0</span> <span class="token operator">and</span> <span class="token number">15</span>
</code></pre></div><h5 id="h-字符串-时间的转换"><a href="#h-字符串-时间的转换" class="header-anchor">#</a> H，字符串-时间的转换</h5> <p>时间转字符串</p> <p>适用场景，取出数据库表数据就可以使用字符串来接收</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> date_format<span class="token punctuation">(</span>paytime<span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %h:%i:%s'</span><span class="token punctuation">)</span> 
<span class="token keyword">from</span> tb_orders
<span class="token comment">-- 输出格式为：2021-07-18 12:58:00</span>
<span class="token comment">-- 可以通过修改'%Y-%m-%d %h:%i:%s'来获取自己需要的格式</span>
</code></pre></div><p>字符串转时间</p> <p>适用场景，前端传来的时间字符串在插入数据库表时进行解析</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'2021-07-18 12:58:00'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-流程控制"><a href="#_4-流程控制" class="header-anchor">#</a> （4）流程控制</h4> <h5 id="a-二选一"><a href="#a-二选一" class="header-anchor">#</a> A，二选一</h5> <p>if</p> <p>使用场景：对null的一种处理方法</p> <p>根据列值判断的返回结果选择显示哪些信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 年龄大于60就显示高龄，低于60就显示低龄</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token operator">&gt;</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token string">'高龄'</span><span class="token punctuation">,</span><span class="token string">'低龄'</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
<span class="token comment">-- 下面两个if是等价的，如果成绩没有录入，数据库表就为null，为nul就显示0</span>
<span class="token keyword">select</span> 
<span class="token keyword">if</span><span class="token punctuation">(</span>grade <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>grade<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
ifnull<span class="token punctuation">(</span>grade<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="b-多选一"><a href="#b-多选一" class="header-anchor">#</a> B，多选一</h5> <p>case-when-条件-then-end</p> <p>使用场景：一般可以用于表示状态state，或者身份。在数据库使用数据存储，取出时再还原</p> <p><strong>when相当于java中的else if</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 按成绩的区间显示等级</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span><span class="token keyword">case</span> <span class="token keyword">when</span> grade <span class="token operator">&gt;</span> <span class="token number">90</span> <span class="token keyword">then</span> <span class="token string">'优秀'</span>
            <span class="token keyword">when</span> grade <span class="token operator">&gt;</span> <span class="token number">80</span> <span class="token keyword">then</span> <span class="token string">'良好'</span>
			<span class="token keyword">when</span> grade <span class="token operator">&gt;</span> <span class="token number">70</span> <span class="token keyword">then</span> <span class="token string">'中等'</span>
			<span class="token keyword">when</span> grade <span class="token operator">&gt;=</span><span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'及格'</span> 
			<span class="token keyword">else</span> <span class="token string">'不及格'</span>
			<span class="token keyword">end</span> <span class="token string">'成绩'</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h5 id="c-结果判断"><a href="#c-结果判断" class="header-anchor">#</a> C，结果判断</h5> <p>case-列名-when-值-then-end</p> <p>等价于java中的switch if</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> id<span class="token punctuation">,</span><span class="token keyword">case</span> grade <span class="token keyword">when</span> <span class="token number">90</span> <span class="token keyword">then</span> <span class="token string">'优秀'</span>
                     <span class="token keyword">when</span> <span class="token number">80</span> <span class="token keyword">then</span> <span class="token string">'良好'</span>
					 <span class="token keyword">when</span> <span class="token number">70</span> <span class="token keyword">then</span> <span class="token string">'中等'</span>
					 <span class="token keyword">when</span> <span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'及格'</span> 
					 <span class="token keyword">else</span> <span class="token string">'不及格'</span>
					 <span class="token keyword">end</span> <span class="token string">'成绩'</span>
<span class="token keyword">from</span> t_user
</code></pre></div><h4 id="_5-其他类型"><a href="#_5-其他类型" class="header-anchor">#</a> （5）其他类型</h4> <h5 id="a-返回数据库信息"><a href="#a-返回数据库信息" class="header-anchor">#</a> A，返回数据库信息</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 数据库名，版本号，登录用户</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="b-加密函数"><a href="#b-加密函数" class="header-anchor">#</a> B，加密函数</h5> <p>需要注意：</p> <p><strong>mysql 8.0版本移除了password函数</strong></p> <p>通常用于对密码加密，没有解密方法，一般都是通过比较加密之后的数值。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- mds加密，比较常用，32位</span>
<span class="token keyword">select</span> md5<span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span>
<span class="token comment">-- SHA1加密，40位</span>
<span class="token keyword">select</span> SHA1<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>password用于修改mysql的用户密码，如果是应用与web程序建议使用md5()函数</li> <li>password函数旧版16位，新版41位，可用select length(password('123456'))察看。</li> <li>password函数加密不可逆，如果和数据库里加密后内容比较时可以采用password(pwd)==字段内容的方式</li> <li>md5函数加密后32位，此加密算法不可逆，其实md5算法是信息摘要算法，如果拿来做压缩也是有损压缩，理论上即使有反向算法也无法恢复信息原样。他常被用来检验下载数据的完整性。如好多软件都提供md5码，供用户下载完毕校验完整性。</li></ul> <p><strong>SHA-1与MD5的比较</strong></p> <p>因为二者均由MD4导出，SHA-1和MD5彼此很相似。相应的，他们的强度和其他特性也是相似。</p> <p>但还有以下几点不同：</p> <ol><li>对强行攻击的安全性：最显著和最重要的区别是SHA-1摘要比MD5摘要长32 位。使用强行技术，产生任何一个报文使其摘要等于给定报摘要的难度对MD5是2128数量级的操作，而对SHA-1则是2160数量级的操作。这样，SHA-1对强行攻击有更大的强度。</li> <li>对密码分析的安全性：由于MD5的设计，易受密码分析的攻击，SHA-1显得不易受这样的攻击。</li> <li>速度：在相同的硬件上，SHA-1的运行速度比MD5慢。</li></ol> <h5 id="c-破解方法"><a href="#c-破解方法" class="header-anchor">#</a> C，破解方法</h5> <p>虽然没有逆推的方法，但可以通过映射的方法得到加密前的数值</p> <p>可以通过下面的映射网站，就可以根据md5加密后的密文还原成明文。</p> <p><a href="https://www.cmd5.com/" target="_blank" rel="noopener noreferrer">md5映射网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_2-组函数"><a href="#_2-组函数" class="header-anchor">#</a> 2，组函数</h3> <h4 id="_1-5个常用组函数"><a href="#_1-5个常用组函数" class="header-anchor">#</a> （1）5个常用组函数</h4> <h5 id="a-avg-sum"><a href="#a-avg-sum" class="header-anchor">#</a> A，avg(),sum()</h5> <p>适用类型：数值类型</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- avg(num)平均数，sum(num)总数</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token keyword">from</span> tb_orders
</code></pre></div><h5 id="b-min-max"><a href="#b-min-max" class="header-anchor">#</a> B，min(),max()</h5> <p>适用类型：数值类型，字符串类型，日期类型。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 最大值与最小值</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>paytime<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
<span class="token keyword">from</span> tb_orders
</code></pre></div><h5 id="c-count"><a href="#c-count" class="header-anchor">#</a> C，count()</h5> <p>适用类型：数值类型，字符串类型，日期类型。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 一般情况如果统计表的总条数可以使用下面的任意一个</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
<span class="token keyword">from</span> tb_orders
<span class="token comment">-- 如果想查找某个列名不为null的个数，就采用下面</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span> 
<span class="token keyword">from</span> tb_orders
</code></pre></div><p>关系：avg=sum/count</p> <h4 id="_2-分组函数"><a href="#_2-分组函数" class="header-anchor">#</a> （2）分组函数</h4> <p>group by 列名：表示按哪个列名分组</p> <p>适用场景：</p> <p>查询公司每个部门的平均工资</p> <p>查询不同活动的人的平均年龄等</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 将每个行为的人分为一组，再计算各组的平均ni</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">action</span>
<span class="token keyword">from</span> t_user
<span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token keyword">action</span>
</code></pre></div><p><strong>需要注意</strong></p> <p>当组函数与非组函数进行查询时，非组函数一定要写在group by 中。</p> <h4 id="_3-having"><a href="#_3-having" class="header-anchor">#</a> （3）having</h4> <p>当条件中出现组函数时，需要将where替换成having，并放置于group by后面</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user
<span class="token keyword">where</span> grade <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token keyword">action</span>
<span class="token comment">-- 有组函数avg，使用having</span>
<span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">10</span>
</code></pre></div><h3 id="_3-总流程"><a href="#_3-总流程" class="header-anchor">#</a> 3，总流程</h3> <div class="language- extra-class"><pre class="language-text"><code>select ........
from ....(left outer/right outer) join... on ....
where 非组函数的过滤条件
group by ......
having 组函数的过滤条件
order by ... asc/desc,....asc/desc
limit ......,......
</code></pre></div><h2 id="四-子查询"><a href="#四-子查询" class="header-anchor">#</a> 四，子查询</h2> <h3 id="_1-单行子查询"><a href="#_1-单行子查询" class="header-anchor">#</a> 1，单行子查询</h3> <p>基本运算符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询超过平均年龄的人的所有信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user
<span class="token keyword">where</span> age <span class="token operator">&gt;=</span><span class="token punctuation">(</span>
   <span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> 
	 <span class="token keyword">from</span> t_user
<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-多行子查询"><a href="#_2-多行子查询" class="header-anchor">#</a> 2，多行子查询</h3> <p>in，any（任一个），all</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询办过订单的用户</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user
<span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span>
<span class="token keyword">select</span> user_id <span class="token keyword">from</span> tb_orders
<span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-exists"><a href="#_3-exists" class="header-anchor">#</a> 3，exists</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询为管理id的id的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee e1
<span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span>
<span class="token keyword">select</span> <span class="token string">'a'</span>
<span class="token keyword">from</span> employee e2
<span class="token keyword">where</span> e1<span class="token punctuation">.</span>id<span class="token operator">=</span>e2<span class="token punctuation">.</span>managerID
<span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">asc</span>
</code></pre></div><h2 id="五-数据库操作"><a href="#五-数据库操作" class="header-anchor">#</a> 五，数据库操作</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 1，创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名
<span class="token comment">-- 2，查看所有数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span>
<span class="token comment">-- 3，查看所有数据库表</span>
<span class="token keyword">use</span> 数据库名
<span class="token keyword">show</span> <span class="token keyword">tables</span>
<span class="token comment">-- 4，删除数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> boot_crm
</code></pre></div><h2 id="六-表操作"><a href="#六-表操作" class="header-anchor">#</a> 六，表操作</h2> <h3 id="_1-表操作"><a href="#_1-表操作" class="header-anchor">#</a> 1，表操作</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 1，普通创建</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp{
id <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token comment">-- varchar可变字符，能够自己扩展，必须赋size值</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
grade <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
paytime <span class="token keyword">date</span>
}

<span class="token comment">-- 可以通过起别名为新表列名重新命名</span>
<span class="token comment">-- 2，在其他表的基础上创建表，会有其他表的数据</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp
<span class="token keyword">as</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span> age <span class="token keyword">from</span> t_user

<span class="token comment">-- 3，如果不需要数据，只需要让查询结果为空即可</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp
<span class="token keyword">as</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span> age <span class="token keyword">from</span> t_user
<span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">-- 4，修改表名</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> 原表名 <span class="token keyword">to</span> 新表名

<span class="token comment">-- 5，删除表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> 表名

<span class="token comment">-- 6，清空表数据，保留表结构</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> emp

<span class="token comment">-- 7，truncate与delete的区别</span>
<span class="token keyword">truncate</span>操作之后不能进行回滚
<span class="token keyword">delete</span>可以回滚

<span class="token comment">-- 8，提交与回滚</span>
<span class="token comment">-- 提交，默认情况下都是会自动提交的，可以使用set autocommit=false来关闭</span>
<span class="token keyword">commit</span>
<span class="token comment">-- 回滚</span>
<span class="token keyword">rollback</span>
</code></pre></div><h3 id="_2-列的增删改查"><a href="#_2-列的增删改查" class="header-anchor">#</a> 2，列的增删改查</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 创建新列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp
<span class="token keyword">add</span> newcolunm <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token comment">-- 删除列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp
<span class="token keyword">drop</span> newcolunm
<span class="token comment">-- 修改列（类型，数值）</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp
<span class="token keyword">modify</span> newcolunm <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="七-约束"><a href="#七-约束" class="header-anchor">#</a> 七，约束</h2> <h4 id="_1-分类"><a href="#_1-分类" class="header-anchor">#</a> 1，分类</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 角度一（从声明的位置）：列级约束  vs  表级约束</span>
<span class="token comment">-- 角度二（从作用的列的数量上）：单列约束  vs  多列约束</span>
<span class="token comment">-- 角度三（从功能上区分）：</span>
<span class="token operator">not</span> <span class="token boolean">null</span> ： 非空约束
<span class="token keyword">unique</span> ： 唯一性约束
<span class="token keyword">primary</span> <span class="token keyword">key</span> ： 主键约束
<span class="token keyword">foreign</span> <span class="token keyword">key</span> ： 外键约束
<span class="token keyword">check</span> ： 检查约束
<span class="token keyword">default</span> ： 默认值约束
</code></pre></div><h4 id="_2-使用与修改"><a href="#_2-使用与修改" class="header-anchor">#</a> 2，使用与修改</h4> <p>在创建表中使用，使用alter修改</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp3<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
myname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
age <span class="token keyword">int</span> <span class="token keyword">check</span> <span class="token punctuation">(</span>age<span class="token operator">&lt;</span><span class="token number">100</span> <span class="token operator">&amp;&amp;</span> age<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
emp_id <span class="token keyword">int</span><span class="token punctuation">,</span>
phone  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">10086</span><span class="token punctuation">,</span>
<span class="token comment">-- 表级约束写在最后，emp2_phone_uk为约束名</span>
<span class="token keyword">constraint</span> emp3_phone_uk <span class="token keyword">unique</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">constraint</span> emp3_id_pk <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">constraint</span> emp3_fk <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">references</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">-- 查看所有索引</span>
<span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> emp3
</code></pre></div><h4 id="_1-not-null"><a href="#_1-not-null" class="header-anchor">#</a> （1）not null</h4> <p>列不为空</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">modify</span> myname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">null</span>
</code></pre></div><h4 id="_2-unique"><a href="#_2-unique" class="header-anchor">#</a> （2）unique</h4> <p>唯一性约束</p> <p>使用unique会自动创建索引，默认名为列名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改是对索引进行修改</span>
<span class="token comment">-- 删除</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp3
<span class="token keyword">drop</span> <span class="token keyword">index</span> id
<span class="token comment">-- 添加</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp3
<span class="token keyword">add</span> <span class="token keyword">constraint</span> emp3_id_uk <span class="token keyword">unique</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>phone<span class="token punctuation">)</span>
<span class="token comment">-- 组合索引如果指定索引名，在删除时指定第一个列名即可，如上面的id</span>
</code></pre></div><h4 id="_3-主键约束"><a href="#_3-主键约束" class="header-anchor">#</a> （3）主键约束</h4> <p>primary key：既满足了唯一性，又满足了非空性。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改，主键只能有一个，删除主键即可</span>
<span class="token comment">-- 删除，有自动递增时无法删除</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp3
<span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>
</code></pre></div><h4 id="_4-外键约束"><a href="#_4-外键约束" class="header-anchor">#</a> （4）外键约束</h4> <p>foreign key：能够多表限制</p> <p>在开发中，一般不建议使用外键约束，尽量在java代码中进行判断</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 删除外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp3
<span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> emp3_fk
<span class="token comment">-- 添加</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp3
<span class="token keyword">add</span> <span class="token keyword">constraint</span> emp3_fk <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">references</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</code></pre></div><h4 id="_5-检查约束"><a href="#_5-检查约束" class="header-anchor">#</a> （5）检查约束</h4> <p>check：加入限制条件</p> <p>在mysql中会失效，依旧可以插入成功</p> <h4 id="_6-默认约束"><a href="#_6-默认约束" class="header-anchor">#</a> （6）默认约束</h4> <p>default，插入时没有赋值就会采用默认值</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/vuejs/vuepress/edit/master/docs/datarepo/mysql/mysql.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/dose1/assets/js/app.370f2ecb.js" defer></script><script src="/dose1/assets/js/2.579f079f.js" defer></script><script src="/dose1/assets/js/12.7a3b1235.js" defer></script>
  </body>
</html>
